import{r as N,j as e,h as l,I as j,i as a,k,B as $,l as D,m as M,n as x,u as E,o as I,M as U,p as Z,q as r,C as G,P as K,t as O,v as T,w as q,x as B,y as W}from"./index-e9c24449.js";const Y=s=>{const n=new Date(s),c=new Date().getTime()-n.getTime();return Math.floor(c/(1e3*60*60*24*365.25))},H=s=>s.map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(", "),J=s=>s.charAt(0).toUpperCase(),Q=s=>Number(s).toFixed(1),te=()=>{const[s,n]=N.useState(!1),[t,c]=N.useState("A to Z"),o=()=>{n(m=>!m)},d=()=>{n(!1)},i=m=>{c(m),n(!1)};return e.jsxs("div",{className:l.filter_wrapper,children:[e.jsx("p",{className:l.text,children:"Filters"}),e.jsxs("button",{className:l.dropdown_btn,onClick:o,children:[t,e.jsx(j,{id:"arrow-down",size:20,className:l.icon})]}),s&&e.jsxs("ul",{className:l.dropdown_list,onMouseLeave:d,children:[e.jsx("li",{className:`${l.dropdown_list_item} ${t==="A to Z"&&l.active}`,onClick:()=>i("A to Z"),children:"A to Z"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Z to A"&&l.active}`,onClick:()=>i("Z to A"),children:"Z to A"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Less than 10$"&&l.active}`,onClick:()=>i("Less than 10$"),children:"Less than 10$"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Greater than 10$"&&l.active}`,onClick:()=>i("Greater than 10$"),children:"Greater than 10$"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Popular"&&l.active}`,onClick:()=>i("Popular"),children:"Popular"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Not popular"&&l.active}`,onClick:()=>i("Not popular"),children:"Not popular"}),e.jsx("li",{className:`${l.dropdown_list_item} ${t==="Show all"&&l.active}`,onClick:()=>i("Show all"),children:"Show all"})]})]})},re=({name:s,avatar_url:n,education:t,experience:c,kids_age:o,characters:d,about:i,birthday:m,location:u,price_per_hour:g,rating:f,reviews:w})=>{const p=se(),b=Y(m),C=H(d),[h,_]=N.useState(!1),[P,y]=N.useState(!1);N.useEffect(()=>{p?(async()=>{try{const F=await k(p);if(F){const S=Object.keys(F).some(z=>F[z].name===s);y(S)}}catch{$.error("Something went wrong. Please try again.")}})():y(!1)},[p,s]);const L=async()=>{if(!p)$.info("Please log in to your account to add nanny to favorites.");else try{const v=await k(p);if(v){const A=Object.keys(v).find(S=>v[S].name===s);A?(await D(p,A),y(!1)):(await M(p,{name:s,avatar_url:n,education:t,experience:c,kids_age:o,characters:d,about:i,birthday:m,location:u,price_per_hour:g,rating:f,reviews:w}),y(!0))}else await M(p,{name:s,avatar_url:n,education:t,experience:c,kids_age:o,characters:d,about:i,birthday:m,location:u,price_per_hour:g,rating:f,reviews:w}),y(!0)}catch(v){console.log(v.message),$.error("Something went wrong. Please try again.")}},R=()=>{_(!h)};return e.jsx("li",{className:a.item,children:e.jsxs("div",{className:a.nanny_card,children:[e.jsxs("div",{className:a.avatar_wrapper,children:[e.jsx("img",{className:a.avatar,src:n,alt:"Nanny's avatar"}),e.jsx(j,{className:a.icon_online,id:"online",size:14})]}),e.jsxs("div",{children:[e.jsx("p",{className:a.title,children:"Nanny"}),e.jsx("p",{className:a.accent_name,children:s}),e.jsxs("div",{className:a.wrapper_inside,children:[e.jsxs("p",{className:a.text_wrapper,children:["Age: ",e.jsxs("span",{className:a.accent_age,children:[" ",b]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Experience:",e.jsxs("span",{className:a.accent,children:[" ",c]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Kids Age:",e.jsxs("span",{className:a.accent,children:[" ",o]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Characters:",e.jsxs("span",{className:a.accent,children:[" ",C]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Education:",e.jsxs("span",{className:a.accent,children:[" ",t]})]})]}),e.jsx("p",{className:a.about,children:i}),h&&e.jsx(X,{reviews:w,name:s,avatar_url:n}),!h&&e.jsx("button",{className:a.btn_more,onClick:R,children:"Read more"})]}),e.jsxs("div",{className:a.wrapper_top,children:[e.jsxs("p",{className:a.wrapper_top_inside,children:[e.jsx(j,{id:"location",size:16}),u]}),e.jsxs("p",{className:a.wrapper_top_inside,children:[e.jsx(j,{className:a.icon_star,id:"star",size:16}),"Rating: ",f]}),e.jsxs("p",{className:a.price_text,children:["Price / 1 hour:",e.jsxs("span",{className:a.price,children:[" ",g,"$"]})]})]}),e.jsx("button",{className:a.btn_heart,onClick:L,children:P?e.jsx(j,{id:"heart-active",size:26}):e.jsx(j,{id:"heart",size:26})})]})})},V=({comment:s,rating:n,reviewer:t})=>{const c=J(t),o=Q(n);return e.jsxs("li",{className:x.item,children:[e.jsxs("div",{className:x.wrapper,children:[e.jsx("div",{className:x.letter,children:c}),e.jsxs("div",{className:x.wrapper_inside,children:[e.jsx("p",{children:t}),e.jsxs("div",{className:x.wrapper_icon,children:[e.jsx(j,{className:x.icon,id:"star",size:16}),e.jsx("p",{className:x.text_wrapper,children:o})]})]})]}),e.jsx("p",{className:x.comment,children:s})]})},X=({reviews:s,name:n,avatar_url:t})=>{const[c,o]=E();return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:I.list,children:s==null?void 0:s.map(({comment:d,rating:i,reviewer:m})=>e.jsx(V,{comment:d,rating:i,reviewer:m},m))}),e.jsx("button",{className:I.btn_appointment,onClick:o,children:"Make an appointment"}),c&&e.jsx(U,{title:"Make an appointment with a babysitter",toggleModal:o,children:e.jsx(ee,{toggleModal:o,name:n,avatar_url:t})})]})},ee=({name:s,avatar_url:n,toggleModal:t})=>{var u,g,f,w,p,b,C;const{register:c,control:o,handleSubmit:d,formState:{errors:i}}=Z({resolver:O(q)}),m=async h=>{try{await T(h),console.log(h),$.success("Appointment was made sucessfull. Please wait a call from our manager."),t()}catch(_){console.log(_.message),$.error("Password is incorrect or user doesn't exist. Please, try again.")}};return e.jsxs("div",{className:r.wrapper,children:[e.jsx("p",{className:r.description,children:"Arranging a meeting with a caregiver for your child is the first step to creating a safe and comfortable environment. Fill out the form below so we can match you with the perfect care partner."}),e.jsxs("div",{className:r.inside_wrapper,children:[e.jsx("img",{className:r.avatar,src:n,alt:"Nanny's avatar"}),e.jsxs("div",{children:[e.jsx("p",{className:r.description,children:"Your nanny"}),e.jsx("p",{className:r.name,children:s})]})]}),e.jsxs("form",{onSubmit:d(m),className:r.form,children:[e.jsxs("div",{className:r.input_wrapper_second,children:[e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("input",{type:"text",...c("address"),placeholder:"Address"}),e.jsx("p",{className:r.form_error,children:(u=i.address)==null?void 0:u.message})]}),e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("input",{type:"text",...c("phone"),placeholder:"+380"}),e.jsx("p",{className:r.form_error,children:(g=i.phone)==null?void 0:g.message})]})]}),e.jsxs("div",{className:r.input_wrapper_second,children:[e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("input",{type:"text",...c("age"),placeholder:"Child's age"}),e.jsx("p",{className:r.form_error,children:(f=i.age)==null?void 0:f.message})]}),e.jsxs("div",{className:r.input_wrapper,children:[e.jsx(G,{control:o,name:"time",render:({field:h})=>e.jsx(K,{showSecond:!1,clearIcon:e.jsx(j,{id:"clock",className:r.icon,size:20}),placeholder:"Meeting time",value:h.value,onChange:_=>{h.onChange(_)}})}),e.jsx("p",{className:r.form_error,children:(w=i.time)==null?void 0:w.message})]})]}),e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("input",{type:"email",...c("email"),placeholder:"Email"}),e.jsx("p",{className:r.form_error,children:(p=i.email)==null?void 0:p.message})]}),e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("input",{type:"text",...c("name"),placeholder:"Father's or mother's name"}),e.jsx("p",{className:r.form_error,children:(b=i.name)==null?void 0:b.message})]}),e.jsxs("div",{className:r.input_wrapper,children:[e.jsx("textarea",{type:"text",...c("comment"),placeholder:"Comment"}),e.jsx("p",{className:r.form_error,children:(C=i.comment)==null?void 0:C.message})]}),e.jsx("button",{className:r.btn_submit,type:"submit",children:"Send"})]})]})},se=()=>{const[s,n]=N.useState(!1),[t,c]=N.useState(null);return N.useEffect(()=>{const o=B(W,d=>{d?(n(!0),c(d.uid)):(n(!1),c(null))});return()=>o()},[]),s?t:null};export{te as F,se as G,re as N};
