import{u as C,j as e,b as y,M as S,r as x,c as s,I as j,d as b,f as R,B as w,e as m,g as D,h as a,o as F,p as k,i as z}from"./index-585e8a58.js";import{F as E}from"./Filters-8292b278.js";const I=r=>{const c=new Date(r),t=new Date().getTime()-c.getTime();return Math.floor(t/(1e3*60*60*24*365.25))},L=r=>r.map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(", "),$=r=>r.charAt(0).toUpperCase(),P=r=>Number(r).toFixed(1),T=({reviews:r,name:c,avatar_url:n})=>{const[t,o]=C();return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:y.list,children:r==null?void 0:r.map(({comment:i,rating:d,reviewer:l})=>e.jsx(B,{comment:i,rating:d,reviewer:l},l))}),e.jsx("button",{className:y.btn_appointment,onClick:o,children:"Make an appointment"}),t&&e.jsx(S,{title:"Make an appointment with a babysitter",toggleModal:o,children:e.jsx(K,{toggleModal:o,name:c,avatar_url:n})})]})},U=({name:r,avatar_url:c,education:n,experience:t,kids_age:o,characters:i,about:d,birthday:l,location:p,price_per_hour:N,rating:u,reviews:g})=>{const _=I(l),f=L(i),[h,v]=x.useState(!1),M=()=>{v(!h)},A=()=>{};return e.jsx("li",{className:s.item,children:e.jsxs("div",{className:s.nanny_card,children:[e.jsxs("div",{className:s.avatar_wrapper,children:[e.jsx("img",{className:s.avatar,src:c,alt:"Nanny's avatar"}),e.jsx(j,{className:s.icon_online,id:"online",size:14})]}),e.jsxs("div",{children:[e.jsx("p",{className:s.title,children:"Nanny"}),e.jsx("p",{className:s.accent_name,children:r}),e.jsxs("div",{className:s.wrapper_inside,children:[e.jsxs("p",{className:s.text_wrapper,children:["Age: ",e.jsxs("span",{className:s.accent_age,children:[" ",_]})]}),e.jsxs("p",{className:s.text_wrapper,children:["Experience:",e.jsxs("span",{className:s.accent,children:[" ",t]})]}),e.jsxs("p",{className:s.text_wrapper,children:["Kids Age:",e.jsxs("span",{className:s.accent,children:[" ",o]})]}),e.jsxs("p",{className:s.text_wrapper,children:["Characters:",e.jsxs("span",{className:s.accent,children:[" ",f]})]}),e.jsxs("p",{className:s.text_wrapper,children:["Education:",e.jsxs("span",{className:s.accent,children:[" ",n]})]})]}),e.jsx("p",{className:s.about,children:d}),h&&e.jsx(T,{reviews:g,name:r,avatar_url:c}),!h&&e.jsx("button",{className:s.btn_more,onClick:M,children:"Read more"})]}),e.jsxs("div",{className:s.wrapper_top,children:[e.jsxs("p",{className:s.wrapper_top_inside,children:[e.jsx(j,{id:"location",size:16}),p]}),e.jsxs("p",{className:s.wrapper_top_inside,children:[e.jsx(j,{className:s.icon_star,id:"star",size:16}),"Rating: ",u]}),e.jsxs("p",{className:s.price_text,children:["Price / 1 hour:",e.jsxs("span",{className:s.price,children:[" ",N,"$"]})]})]}),e.jsx("button",{className:s.btn_heart,onClick:A,children:e.jsx(j,{id:"heart",size:26})})]})})},Y=()=>{const[r,c]=x.useState([]),[n,t]=x.useState(3),[o,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const p=await R(n);c(p),(p.length===0||p.length<n)&&(i(!1),w.info("You have reached the end of nannies' list."))}catch{w.error("Something went wrong.")}})()},[n]);const d=()=>{t(l=>l+3)};return e.jsxs("div",{className:b.wrapper,children:[e.jsx("ul",{className:b.list,children:r==null?void 0:r.map(l=>e.jsx(U,{...l},l.name))}),o&&e.jsx("button",{className:b.btn_more,onClick:d,children:"Load more"})]})},B=({comment:r,rating:c,reviewer:n})=>{const t=$(n),o=P(c);return e.jsxs("li",{className:m.item,children:[e.jsxs("div",{className:m.wrapper,children:[e.jsx("div",{className:m.letter,children:t}),e.jsxs("div",{className:m.wrapper_inside,children:[e.jsx("p",{children:n}),e.jsxs("div",{className:m.wrapper_icon,children:[e.jsx(j,{className:m.icon,id:"star",size:16}),e.jsx("p",{className:m.text_wrapper,children:o})]})]})]}),e.jsx("p",{className:m.comment,children:r})]})},K=({name:r,avatar_url:c,toggleModal:n})=>{var l,p,N,u,g,_,f;const{register:t,handleSubmit:o,formState:{errors:i}}=D({resolver:F(z)}),d=async h=>{try{await k(h),w.success("Appointment was made sucessfull. Please wait a call from our manager."),n()}catch(v){console.log(v.message),w.error("Password is incorrect or user doesn't exist. Please, try again.")}};return e.jsxs("div",{className:a.wrapper,children:[e.jsx("p",{className:a.description,children:"Arranging a meeting with a caregiver for your child is the first step to creating a safe and comfortable environment. Fill out the form below so we can match you with the perfect care partner."}),e.jsxs("div",{className:a.inside_wrapper,children:[e.jsx("img",{className:a.avatar,src:c,alt:"Nanny's avatar"}),e.jsxs("div",{children:[e.jsx("p",{className:a.description,children:"Your nanny"}),e.jsx("p",{className:a.name,children:r})]})]}),e.jsxs("form",{onSubmit:o(d),className:a.form,children:[e.jsxs("div",{className:a.input_wrapper_second,children:[e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"text",...t("address"),placeholder:"Address"}),e.jsx("p",{className:a.form_error,children:(l=i.address)==null?void 0:l.message})]}),e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"text",...t("phone"),placeholder:"+380"}),e.jsx("p",{className:a.form_error,children:(p=i.phone)==null?void 0:p.message})]})]}),e.jsxs("div",{className:a.input_wrapper_second,children:[e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"text",...t("age"),placeholder:"Child's age"}),e.jsx("p",{className:a.form_error,children:(N=i.age)==null?void 0:N.message})]}),e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"time",...t("time"),placeholder:"Child's age"}),e.jsx("p",{className:a.form_error,children:(u=i.time)==null?void 0:u.message})]})]}),e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"email",...t("email"),placeholder:"Email"}),e.jsx("p",{className:a.form_error,children:(g=i.email)==null?void 0:g.message})]}),e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("input",{type:"text",...t("name"),placeholder:"Father's or mother's name"}),e.jsx("p",{className:a.form_error,children:(_=i.name)==null?void 0:_.message})]}),e.jsxs("div",{className:a.input_wrapper,children:[e.jsx("textarea",{type:"text",...t("comment"),placeholder:"Comment"}),e.jsx("p",{className:a.form_error,children:(f=i.comment)==null?void 0:f.message})]}),e.jsx("button",{className:a.btn_submit,type:"submit",children:"Send"})]})]})},W="_wrapper_1w2zx_1",q={wrapper:W},J=()=>e.jsxs("div",{className:q.wrapper,children:[e.jsx(E,{}),e.jsx(Y,{})]});export{J as default};
