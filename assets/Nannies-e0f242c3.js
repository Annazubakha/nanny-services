import{r as p,j as e,b as a,I as u,g as I,B as N,c as L,d as k,e as A,f as U,h as j,u as $,i as P,M as K,k as T,l as t,C as O,P as Y,o as q,p as B,m as G,n as W,q as H}from"./index-0a587e30.js";import{F as J}from"./Filters-389408c2.js";const Q=s=>{const c=new Date(s),r=new Date().getTime()-c.getTime();return Math.floor(r/(1e3*60*60*24*365.25))},V=s=>s.map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(", "),X=s=>s.charAt(0).toUpperCase(),Z=s=>Number(s).toFixed(1),ee=({name:s,avatar_url:c,education:n,experience:r,kids_age:i,characters:m,about:o,birthday:l,location:h,price_per_hour:v,rating:w,reviews:_})=>{const d=ne(),y=Q(l),b=V(m),[x,g]=p.useState(!1),[R,f]=p.useState(!1);p.useEffect(()=>{d?(async()=>{try{const S=await I(d);if(S){const M=Object.keys(S).some(E=>S[E].nanny.name===s);f(M)}}catch{N.error("Something went wrong. Please try again.")}})():f(!1)},[d,s]);const z=async()=>{if(!d)N.info("Please log in to your account to add nanny to favorites.");else try{const F=await I(d);if(F){const C=Object.keys(F).find(M=>F[M].nanny.name===s);C?(await L(d,C),f(!1)):(await k(d,{name:s}),f(!0))}else await k(d,{name:s}),f(!0)}catch{N.error("Something went wrong. Please try again.")}},D=()=>{g(!x)};return e.jsx("li",{className:a.item,children:e.jsxs("div",{className:a.nanny_card,children:[e.jsxs("div",{className:a.avatar_wrapper,children:[e.jsx("img",{className:a.avatar,src:c,alt:"Nanny's avatar"}),e.jsx(u,{className:a.icon_online,id:"online",size:14})]}),e.jsxs("div",{children:[e.jsx("p",{className:a.title,children:"Nanny"}),e.jsx("p",{className:a.accent_name,children:s}),e.jsxs("div",{className:a.wrapper_inside,children:[e.jsxs("p",{className:a.text_wrapper,children:["Age: ",e.jsxs("span",{className:a.accent_age,children:[" ",y]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Experience:",e.jsxs("span",{className:a.accent,children:[" ",r]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Kids Age:",e.jsxs("span",{className:a.accent,children:[" ",i]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Characters:",e.jsxs("span",{className:a.accent,children:[" ",b]})]}),e.jsxs("p",{className:a.text_wrapper,children:["Education:",e.jsxs("span",{className:a.accent,children:[" ",n]})]})]}),e.jsx("p",{className:a.about,children:o}),x&&e.jsx(te,{reviews:_,name:s,avatar_url:c}),!x&&e.jsx("button",{className:a.btn_more,onClick:D,children:"Read more"})]}),e.jsxs("div",{className:a.wrapper_top,children:[e.jsxs("p",{className:a.wrapper_top_inside,children:[e.jsx(u,{id:"location",size:16}),h]}),e.jsxs("p",{className:a.wrapper_top_inside,children:[e.jsx(u,{className:a.icon_star,id:"star",size:16}),"Rating: ",w]}),e.jsxs("p",{className:a.price_text,children:["Price / 1 hour:",e.jsxs("span",{className:a.price,children:[" ",v,"$"]})]})]}),e.jsx("button",{className:a.btn_heart,onClick:z,children:R?e.jsx(u,{id:"heart-active",size:26}):e.jsx(u,{id:"heart",size:26})})]})})},se=()=>{const[s,c]=p.useState([]),[n,r]=p.useState(3),[i,m]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const h=await U(n);c(h),(h.length===0||h.length<n)&&(m(!1),N.info("You have reached the end of nannies' list."))}catch{N.error("Something went wrong.")}})()},[n]);const o=()=>{r(l=>l+3)};return e.jsxs("div",{className:A.wrapper,children:[e.jsx("ul",{className:A.list,children:s==null?void 0:s.map(l=>e.jsx(ee,{...l},l.name))}),i&&e.jsx("button",{className:A.btn_more,onClick:o,children:"Load more"})]})},ae=({comment:s,rating:c,reviewer:n})=>{const r=X(n),i=Z(c);return e.jsxs("li",{className:j.item,children:[e.jsxs("div",{className:j.wrapper,children:[e.jsx("div",{className:j.letter,children:r}),e.jsxs("div",{className:j.wrapper_inside,children:[e.jsx("p",{children:n}),e.jsxs("div",{className:j.wrapper_icon,children:[e.jsx(u,{className:j.icon,id:"star",size:16}),e.jsx("p",{className:j.text_wrapper,children:i})]})]})]}),e.jsx("p",{className:j.comment,children:s})]})},te=({reviews:s,name:c,avatar_url:n})=>{const[r,i]=$();return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:P.list,children:s==null?void 0:s.map(({comment:m,rating:o,reviewer:l})=>e.jsx(ae,{comment:m,rating:o,reviewer:l},l))}),e.jsx("button",{className:P.btn_appointment,onClick:i,children:"Make an appointment"}),r&&e.jsx(K,{title:"Make an appointment with a babysitter",toggleModal:i,children:e.jsx(re,{toggleModal:i,name:c,avatar_url:n})})]})},re=({name:s,avatar_url:c,toggleModal:n})=>{var h,v,w,_,d,y,b;const{register:r,control:i,handleSubmit:m,formState:{errors:o}}=T({resolver:q(G)}),l=async x=>{try{await B(x),console.log(x),N.success("Appointment was made sucessfull. Please wait a call from our manager."),n()}catch(g){console.log(g.message),N.error("Password is incorrect or user doesn't exist. Please, try again.")}};return e.jsxs("div",{className:t.wrapper,children:[e.jsx("p",{className:t.description,children:"Arranging a meeting with a caregiver for your child is the first step to creating a safe and comfortable environment. Fill out the form below so we can match you with the perfect care partner."}),e.jsxs("div",{className:t.inside_wrapper,children:[e.jsx("img",{className:t.avatar,src:c,alt:"Nanny's avatar"}),e.jsxs("div",{children:[e.jsx("p",{className:t.description,children:"Your nanny"}),e.jsx("p",{className:t.name,children:s})]})]}),e.jsxs("form",{onSubmit:m(l),className:t.form,children:[e.jsxs("div",{className:t.input_wrapper_second,children:[e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("input",{type:"text",...r("address"),placeholder:"Address"}),e.jsx("p",{className:t.form_error,children:(h=o.address)==null?void 0:h.message})]}),e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("input",{type:"text",...r("phone"),placeholder:"+380"}),e.jsx("p",{className:t.form_error,children:(v=o.phone)==null?void 0:v.message})]})]}),e.jsxs("div",{className:t.input_wrapper_second,children:[e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("input",{type:"text",...r("age"),placeholder:"Child's age"}),e.jsx("p",{className:t.form_error,children:(w=o.age)==null?void 0:w.message})]}),e.jsxs("div",{className:t.input_wrapper,children:[e.jsx(O,{control:i,name:"time",render:({field:x})=>e.jsx(Y,{showSecond:!1,clearIcon:e.jsx(u,{id:"clock",className:t.icon,size:20}),placeholder:"Meeting time",value:x.value,onChange:g=>{x.onChange(g)}})}),e.jsx("p",{className:t.form_error,children:(_=o.time)==null?void 0:_.message})]})]}),e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("input",{type:"email",...r("email"),placeholder:"Email"}),e.jsx("p",{className:t.form_error,children:(d=o.email)==null?void 0:d.message})]}),e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("input",{type:"text",...r("name"),placeholder:"Father's or mother's name"}),e.jsx("p",{className:t.form_error,children:(y=o.name)==null?void 0:y.message})]}),e.jsxs("div",{className:t.input_wrapper,children:[e.jsx("textarea",{type:"text",...r("comment"),placeholder:"Comment"}),e.jsx("p",{className:t.form_error,children:(b=o.comment)==null?void 0:b.message})]}),e.jsx("button",{className:t.btn_submit,type:"submit",children:"Send"})]})]})},ne=()=>{const[s,c]=p.useState(!1),[n,r]=p.useState(null);return p.useEffect(()=>{const i=W(H,m=>{m?(c(!0),r(m.uid)):(c(!1),r(null))});return()=>i()},[]),s?n:null},ce="_wrapper_1w2zx_1",ie={wrapper:ce},de=()=>e.jsxs("div",{className:ie.wrapper,children:[e.jsx(J,{}),e.jsx(se,{})]});export{de as default};
